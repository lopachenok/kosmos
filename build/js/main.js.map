{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["if ('objectFit' in document.documentElement.style === false) {\n\tdocument.addEventListener('DOMContentLoaded', function () {\n\t\tArray.prototype.forEach.call(document.querySelectorAll('img[data-object-fit]'), function (image) {\n\t\t\t(image.runtimeStyle || image.style).background = 'url(\"' + image.src + '\") no-repeat 50%/' + (image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit'));\n\n\t\t\timage.src = 'data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'' + image.width + '\\' height=\\'' + image.height + '\\'%3E%3C/svg%3E';\n\t\t});\n\t});\n}\nfunction is_touch_device() {\n return (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || navigator.msMaxTouchPoints > 0);\n}\n\nvar mobileGlobal, touchGlobal;\n\nif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\n document.body.classList.add(\"mobile\");\n mobileGlobal = true;\n}\n\nif(is_touch_device()) {\n  touchGlobal = true;\n}\n\nif ('addEventListener' in document) {\n    document.addEventListener('DOMContentLoaded', function() {\n        FastClick.attach(document.body);\n    }, false);\n}\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  var player = document.getElementById('video-player');\n  var videoContainer = document.getElementById('video');\n  var flag = false;\n\n  if (!mobileGlobal && player) {\n    player.setAttribute(\"preload\", \"true\");\n  }\n\n  if (player) {\n    videoContainer.addEventListener(\"click\", function() {\n      videoContainer.classList.add('video--play');\n\n      flag = true;\n\n      if (flag) {\n        player.play();\n      }\n    });\n  }\n\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  var addButton = document.getElementById('popover-open');\n  var popover = document.getElementById('popover');\n\n  addButton.addEventListener('click', function (event) {\n    event.stopPropagation();\n    popover.classList.add('popover--open');\n  });\n\n  document.addEventListener('click', function (event) {\n    popover.classList.remove('popover--open');\n  });\n\n  popover.addEventListener('click', function (event) {\n    event.stopPropagation();\n  });\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  var buttons = document.querySelectorAll('.btn');\n  var popupOverlay = document.getElementById('popup-overlay');\n  var body = document.body || document.documentElement;\n\n  Array.prototype.forEach.call(buttons, function(button) {\n    if (button.dataset.popup) {\n      button.addEventListener('click', function () {\n        var popup = document.getElementById(this.dataset.popup);\n        popup.classList.add('popup--open');\n        popupOverlay.classList.add('popup-overlay--open');\n        body.classList.add('overflow-hidden');\n      });\n    }\n  });\n\n  var closeButtons = document.querySelectorAll('.popup__close');\n  Array.prototype.forEach.call(closeButtons, function(close) {\n    close.addEventListener('click', function () {\n      this.parentElement.parentElement.classList.remove('popup--open');\n      popupOverlay.classList.remove('popup-overlay--open');\n      body.classList.remove('overflow-hidden');\n    });\n  });\n\n  var closePaymentsButton = document.querySelector('.popup-payments__close');\n  closePaymentsButton.addEventListener('click', function () {\n    this.parentElement.parentElement.parentElement.classList.remove('popup--open');\n    popupOverlay.classList.remove('popup-overlay--open');\n    body.classList.remove('overflow-hidden');\n  });\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  var forms = document.querySelectorAll('.popup-form');\n\n  Array.prototype.forEach.call(forms, function(form) {\n    form.addEventListener('submit', function(event) {\n      event.preventDefault();\n\n      var inputs = this.querySelectorAll('input');\n      Array.prototype.forEach.call(inputs, function(input) {\n        validateForm(input);\n      });\n\n      var error = this.querySelectorAll('.popup-form__fieldset--error');\n      if (error.length > 0) {\n        this.querySelector('.popup-form__error-count').innerHTML = error.length;\n        this.querySelector('.popup-form__error-text').classList.add('popup-form__error-text--show');\n      } else {\n        this.querySelector('.popup-form__error-text').classList.remove('popup-form__error-text--show');\n      }\n    });\n\n    form.addEventListener('focusin', function (event) {\n      if (event.target.tagName !== 'INPUT') {\n        return;\n      }\n\n      event.target.classList.add('touched');\n    });\n\n    form.addEventListener('focusout', function (event) {\n      var elem = event.target;\n\n      if (elem.tagName !== 'INPUT') {\n        return;\n      }\n\n      validateForm(elem);\n\n      var error = this.querySelectorAll('.popup-form__fieldset--error');\n      var inputsLength = this.querySelectorAll('input').length;\n      var touchedInputsLength = this.querySelectorAll('input.touched').length;\n      var btn = this.querySelector('.btn');\n\n      if (inputsLength === touchedInputsLength) {\n        if (error.length > 0) {\n          btn.classList.add('btn--error');\n          btn.setAttribute('disabled', 'true');\n        } else {\n          btn.classList.remove('btn--error');\n          btn.removeAttribute('disabled');\n        }\n      }\n    });\n  });\n});\n\nfunction validateForm (elem) {\n  if (elem.value === '') {\n    elem.classList.remove('touched');\n    elem.parentElement.classList.add('popup-form__fieldset--error');\n  } else {\n    elem.parentElement.classList.remove('popup-form__fieldset--error');\n  }\n\n  if (elem.type === 'tel') {\n    if (!elem.value.match(/^(\\+)?\\d+$/)) {\n      elem.parentElement.classList.add('popup-form__fieldset--error');\n    } else {\n      elem.parentElement.classList.remove('popup-form__fieldset--error');\n    }\n  }\n\n  if (elem.type === 'email') {\n    if (!elem.value.match(/^[A-Z0-9._%+-]+@[A-Z0-9-]+\\.[A-Z]{2,4}$/igm)) {\n      elem.parentElement.classList.add('popup-form__fieldset--error');\n    } else {\n      elem.parentElement.classList.remove('popup-form__fieldset--error');\n    }\n  }\n}"],"file":"main.js"}